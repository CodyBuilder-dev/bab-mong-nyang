use Service_DB;

CREATE TABLE  User  (
     u_No		INTEGER	NOT NULL AUTO_INCREMENT,
     u_Id		VARCHAR(30) NOT NULL,
     u_Pw		VARCHAR(16) NOT NULL,
     u_Name		VARCHAR(30)	NOT NULL,
     u_Email	VARCHAR(30)	NOT NULL,
     u_Last 	INTEGER NOT NULL,
     PRIMARY KEY(u_No)
);

CREATE TABLE  Device  (
     d_No		INTEGER	NOT NULL AUTO_INCREMENT,
     u_No		INTEGER	NOT NULL,
     d_Name		VARCHAR(30)	NOT NULL,
     d_Age		VARCHAR(30)	NOT NULL,
     d_Species	VARCHAR(30)	NOT NULL,
     d_Weight	VARCHAR(30)	NOT NULL,
     UUID 		VARCHAR(100),
     d_Ip		VARCHAR(100),
     PRIMARY KEY(d_No)
);

CREATE TABLE Setting  (
     s_No		INTEGER	NOT NULL AUTO_INCREMENT,
     d_No		INTEGER	NOT NULL,
     s_Time		TIME NOT NULL,
     s_Amount	INTEGER	NOT NULL,
     s_Activate BOOLEAN NOT NUll,
     PRIMARY KEY(s_No)
);

CREATE TABLE  LogData  (
	 l_No 		INTEGER NOT NULL AUTO_INCREMENT,
	 d_No		INTEGER	NOT NULL,     
     l_Time 	DATETIME NOT NULL,
	 l_Remain	INTEGER	NOT NULL,
	 l_Empty 	BOOLEAN NOT NULL,
	 PRIMARY KEY(l_No)
);

CREATE TABLE  Feed  (
     f_No			INTEGER	NOT NULL AUTO_INCREMENT,
     f_Name			VARCHAR(30)	NOT NULL,
     f_Species		VARCHAR(30) NOT	NULL,
     f_Manufacturer	VARCHAR(30)	NOT NULL,
     f_Protein		VARCHAR(30),
     f_Fat			VARCHAR(30),
     f_Calcium		VARCHAR(30),
     f_Phosphorus	VARCHAR(30),
     f_Fiber 		VARCHAR(30),
     f_Ash 			VARCHAR(30),
     f_Moisture 	VARCHAR(30),
     PRIMARY KEY(f_No)
);

CREATE TABLE  Review  (
     r_No		INTEGER	NOT NULL AUTO_INCREMENT,
     u_No		INTEGER NOT NULL,
     f_No		INTEGER NOT NULL,
     r_Rank 	VARCHAR(10),
     r_Date 	DATE NOT NULL,
     r_Positive	VARCHAR(100),
     r_Negative VARCHAR(100),
     PRIMARY KEY(r_No)
);

CREATE TABLE Product (
	UUID 	VARCHAR(100) NOT NULL,
    SN 	 	VARCHAR(100) NOT NULL,
    PRIMARY KEY(UUID)
);

ALTER TABLE Device ADD CONSTRAINT FK_User_TO_Device_1 FOREIGN KEY (u_No) REFERENCES User (u_No);

ALTER TABLE Device ADD CONSTRAINT FK_Product_TO_Device_1 FOREIGN KEY (UUID) REFERENCES Product (UUID);

ALTER TABLE Review ADD CONSTRAINT FK_User_TO_Review_1 FOREIGN KEY (u_No) REFERENCES User (u_No);

ALTER TABLE Setting ADD CONSTRAINT FK_Device_TO_Setting_1 FOREIGN KEY (d_No) REFERENCES Device (d_No);

ALTER TABLE LogData ADD CONSTRAINT FK_Device_TO_LogData_1 FOREIGN KEY (d_No) REFERENCES Device (d_No);

ALTER TABLE Review ADD CONSTRAINT FK_Feed_TO_Review_1 FOREIGN KEY (f_No) REFERENCES Feed (f_No);
